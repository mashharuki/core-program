# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«2 - æš—å·ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ï¼šæš—å·åŒ–ãƒ»ãƒãƒƒã‚·ãƒ¥é–¢æ•°ã»ã‹

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«2ã¸ã‚ˆã†ã“ãï¼æœ¬ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ã€æš—å·åŒ–ãƒ»ãƒãƒƒã‚·ãƒ¥é–¢æ•°ãƒ»ãã®ä»–ã®æš—å·åŸºç›¤æŠ€è¡“ã‚’å­¦ã³ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®åŸºæœ¬ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ç­‰ã®å®Ÿè£…ã«ãŠã‘ã‚‹å¿œç”¨ãŒè¦‹ãˆã¦ãã¾ã™ã€‚

# è©³ç´°ãªè‡ªç¿’ã‚¬ã‚¤ãƒ‰

ä»¥ä¸‹ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’è‡ªåˆ†ã§èª¿æŸ»ã—ã€ç†è§£ã‚’æ·±ã‚ã¦ãã ã•ã„ã€‚

å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³æœ«ã®å•ã„ã«è‡ªä¿¡ã‚’æŒã£ã¦ç­”ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

é›£ã—ã„ç‚¹ã¯ Discord ã§è³ªå•ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚

## å…±é€šéµæš—å· vs å…¬é–‹éµæš—å·

æš—å·åŒ–ã¯ã€æ­£ã—ã„éµã‚’æŒã¤è€…ã®ã¿ãŒèª­ã‚ã‚‹ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›ã™ã‚‹æŠ€è¡“ã§ã™ã€‚å¤§åˆ¥ã—ã¦2ç¨®é¡ã‚ã‚Šã¾ã™ã€‚

**å…±é€šéµæš—å·ï¼ˆå¯¾ç§°éµï¼‰**ï¼šæš—å·åŒ–ãƒ»å¾©å·ã«åŒã˜éµã‚’ä½¿ã„ã¾ã™ã€‚  
ä»£è¡¨ä¾‹ã¯ AESï¼ˆAdvanced Encryption Standardï¼‰ã€‚

**å…¬é–‹éµæš—å·ï¼ˆéå¯¾ç§°éµï¼‰**ï¼šæš—å·åŒ–éµã¨å¾©å·éµãŒå¯¾ã«ãªã£ã¦ã„ã¾ã™ã€‚  
ä»£è¡¨ä¾‹ã¯ RSAã€‚

é•ã„ã¯ã€Œéµã®æ•°ã€ã§ã™ã€‚å¯¾ç§°éµã¯1æœ¬ã€éå¯¾ç§°éµã¯2æœ¬ï¼ˆå…¬é–‹éµãƒ»ç§˜å¯†éµï¼‰ã€‚å‚è€ƒè³‡æ–™ï¼š
- Symmetric vs. Asymmetric Encryption â€“ differences: https://www.ssl2buy.com/wiki/symmetric-vs-asymmetric-encryption-what-are-differences
- AES Explainedï¼ˆComputerphileï¼‰[14:13]: https://www.youtube.com/watch?v=O4xNJsjtN6E
- Prime Numbers & RSAï¼ˆComputerphileï¼‰[15:06]: https://www.youtube.com/watch?v=JD72Ry60eP4
- What Is AES Encryption: https://www.simplilearn.com/tutorials/cryptography-tutorial/aes-encryption
- What is RSA encryption: https://www.comparitech.com/blog/information-security/rsa-encryption/

:::info
ğŸ¤” è€ƒãˆã¦ã¿ã‚ˆã†
1. å¯¾ç§°éµã¨éå¯¾ç§°éµã®ä¸»ãªé•ã„ã¯ï¼Ÿ
2. AES ã¯ã©ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ã‹ï¼ˆæ¦‚è¦ï¼‰ï¼Ÿ
3. ãªãœ RSA ã¯å…¬é–‹éµæš—å·ã§åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ï¼Ÿ
:::

## DLPï¼ˆé›¢æ•£å¯¾æ•°å•é¡Œï¼‰ã«åŸºã¥ãå…¬é–‹éµæš—å·

RSA ã¯ã€Œç´ å› æ•°åˆ†è§£ã®å›°é›£æ€§ã€ã«åŸºã¥ãã¾ã™ãŒã€ã‚‚ã†ä¸€ã¤ã®ç³»è­œã¨ã—ã¦ã€Œé›¢æ•£å¯¾æ•°å•é¡Œï¼ˆDLPï¼‰ã€ã«åŸºã¥ãå…¬é–‹éµæš—å·ãŒã‚ã‚Šã¾ã™ã€‚

1. **é›¢æ•£å¯¾æ•°å•é¡Œï¼ˆDLPï¼‰**ï¼šå¤šãã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®åŸºç›¤ã§ã™ã€‚
   - Khan Academy: https://youtu.be/SL7J8hPKEWY
   - è§£èª¬è¨˜äº‹: https://www.di-mgt.com.au/public-key-crypto-discrete-logs-0.html

2. **Diffieâ€“Hellman éµå…±æœ‰**ï¼šDLP ã«åŸºã¥ãå¤å…¸çš„ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚å®‰å…¨ã§ãªã„ãƒãƒ£ãƒãƒ«ä¸Šã§ã‚‚å…±æœ‰éµã‚’åˆæ„ã§ãã¾ã™ã€‚
   - Computerphileï¼ˆæ¦‚è¦ï¼‰[8:39]: https://www.youtube.com/watch?v=NmM9HA2MQGI
   - Mathematics bit [7:04]: https://youtu.be/Yjrfm_oRO0w
   - å®Ÿè£…ä¾‹: https://www.geeksforgeeks.org/implementation-diffie-hellman-algorithm/

3. **ElGamal æš—å·**ï¼šDLP ã‚’ç”¨ã„ã‚‹å…¬é–‹éµæš—å·ã€‚
   - Intro [8:20]: https://www.youtube.com/watch?v=oQqr8d5s3Uk
   - Simple example [6:38]: https://www.youtube.com/watch?v=4xVCrTb_1II
   - è§£èª¬: https://www.geeksforgeeks.org/elgamal-encryption-algorithm/

:::info
ğŸ¤” è€ƒãˆã¦ã¿ã‚ˆã†
1. é›¢æ•£å¯¾æ•°å•é¡Œï¼ˆDLPï¼‰ã¨ã¯ï¼Ÿ
2. Diffieâ€“Hellman ã¯ã©ã†å‹•ä½œã—ã¾ã™ã‹ï¼Ÿ
3. ElGamal ã®è¦ç‚¹ã¯ï¼Ÿ
4. DLP ç³»ã®å¼±ç‚¹ï¼ˆæ¬ ç‚¹ï¼‰ã‚’1ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚
:::

## ãƒãƒƒã‚·ãƒ¥é–¢æ•°

ãƒãƒƒã‚·ãƒ¥é–¢æ•°ã¯å…¥åŠ›ã‹ã‚‰å›ºå®šé•·ã®å€¤ã‚’è¿”ã—ã¾ã™ã€‚ã“ã“ã§ã¯ **SHA-256** ã¨ **Poseidon** ã‚’é‡è¦–ã—ã¾ã™ï¼ˆPoseidon ã¯å›è·¯ã«è¦ªå’Œçš„ï¼‰ã€‚

ç‰¹æ€§ï¼šç¬¬ä¸€åŸåƒå›°é›£æ€§ã€ç¬¬äºŒåŸåƒå›°é›£æ€§ã€è¡çªå›°é›£æ€§ã€‚ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã§ã¯ãƒ‡ãƒ¼ã‚¿å®Œå…¨æ€§ã‚„ãƒ–ãƒ­ãƒƒã‚¯è­˜åˆ¥ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚

## ãƒ¡ãƒ«ã‚¯ãƒ«æœ¨

å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã‚’åŠ¹ç‡åŒ–ã™ã‚‹äºŒåˆ†æœ¨æ§‹é€ ã§ã™ã€‚è‘‰ã¯ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚·ãƒ¥ã€å†…éƒ¨ã¯å­ã®ãƒãƒƒã‚·ãƒ¥ã‹ã‚‰æ§‹æˆã•ã‚Œã€ãƒ«ãƒ¼ãƒˆãƒãƒƒã‚·ãƒ¥ã§é›†åˆå…¨ä½“ã‚’è¦ç´„ã—ã¾ã™ã€‚

## ã‚¯ãƒªãƒ—ãƒˆã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ»ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆï¼ˆPedersen ãªã©ï¼‰

ã‚³ãƒŸãƒƒãƒˆï¼ˆéš ã™ï¼‰â†’ãƒªãƒ“ãƒ¼ãƒ«ï¼ˆé–‹ç¤ºï¼‰ã¨ã„ã†2æ®µéšã®åŸå‰‡ã§ã€å€¤ã‚’ä¼ã›ã¤ã¤å¾Œã§æ­£ã—ã•ã‚’è¨¼æ˜ã—ã¾ã™ã€‚Pedersen ã¯ã€Œç§˜åŒ¿æ€§ã€ã¨ã€ŒæŸç¸›æ€§ã€ã‚’ä¸¡ç«‹ã—ã¾ã™ã€‚

## ãƒ‡ã‚¸ã‚¿ãƒ«ç½²åï¼ˆSchnorrãƒ»DSAï¼‰

å…¬é–‹éµæš—å·ã§ã¯å—ä¿¡è€…ã®å…¬é–‹éµã§æš—å·åŒ–ã—ç§˜å¯†éµã§å¾©å·ã—ã¾ã™ã€‚ç½²åã§ã¯ã€é€ä¿¡è€…ãŒç§˜å¯†éµã§ç½²åã—ã€èª°ã§ã‚‚å…¬é–‹éµã§æ¤œè¨¼ã§ãã¾ã™ã€‚ã—ãŸãŒã£ã¦ç½²åã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å…¬é–‹ã•ã‚Œã¾ã™ã€‚

å…¥é–€ï¼šWhat are Digital Signatures?ï¼ˆComputerphileï¼‰[10:16]: https://www.youtube.com/watch?v=s22eJ1eVLTU

**Schnorr ç½²å**ï¼šã‚·ãƒ³ãƒ—ãƒ«ã§åŠ¹ç‡çš„ã€‚
- GfG: https://www.geeksforgeeks.org/schnorr-digital-signature/
- å‹•ç”» [4:58]: https://www.youtube.com/watch?v=mV9hXEFUB6A

**DSA**ï¼šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã§é‡è¦ãªç½²åæ–¹å¼ã€‚
- è§£èª¬: https://www.simplilearn.com/tutorials/cryptography-tutorial/digital-signature-algorithm
- å‹•ç”» [5:46]: https://www.youtube.com/watch?v=iS1nK4G6EtA
- è©³ç´°å‹•ç”» [24:32]: https://www.youtube.com/watch?v=MtT3NBfpV5Q

:::info
ğŸ¤” è€ƒãˆã¦ã¿ã‚ˆã†
1. ãƒ‡ã‚¸ã‚¿ãƒ«ç½²åã®å½¹å‰²ã¨é‡è¦æ€§ã¯ï¼Ÿ
2. DSA ã®ä»•çµ„ã¿ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚
:::

# ğŸ’ª æ¼”ç¿’

## è¨˜è¿°å•é¡Œ

1. å¯¾ç§°éµ vs éå¯¾ç§°éµã®é•ã„ã¨ã€ãã‚Œãã‚Œã®å®Ÿç”¨ä¾‹ã€‚
2. Diffieâ€“Hellman ã‚’ç”¨ã„ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã®å®‰å…¨æ€§å‘ä¸Šã®ä»•çµ„ã¿ã€‚
3. SHA-256 ã¨ Poseidon ã®ç‰¹å¾´ã¨ã€Poseidon ã®åˆ©ç‚¹ã‚’1ã¤ã€‚
4. ãƒ¡ãƒ«ã‚¯ãƒ«æœ¨ãŒå¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ç†ç”±ã€‚
5. Pedersen ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆãŒãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’ä¿ã¤æ–¹æ³•ã€‚
6. ãƒ‡ã‚¸ã‚¿ãƒ«ç½²åä»˜ãæ–‡æ›¸ã®çœŸæ­£æ€§ç¢ºèªã®æ–¹æ³•ã€‚

## ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°èª²é¡Œï¼ˆNode.jsï¼‰

å¿…è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼š

```bash
npm install merkletreejs poseidon-encryption ffjavascript
```

### èª²é¡Œ1ï¼šå…¬é–‹éµæš—å·ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ç½²å

Node.js ã® `crypto` ã‚’ä½¿ã£ã¦ã€RSAéµç”Ÿæˆâ†’æš—å·åŒ–â†’å¾©å·â†’ç½²åâ†’æ¤œè¨¼ã¾ã§è¡Œã£ã¦ãã ã•ã„ã€‚

```javascript
const crypto = require('crypto');

const { publicKey, privateKey } = crypto.generateKeyPairSync('rsa', { modulusLength: 2048 });

// Encryptï¼ˆå…¬é–‹éµã§æš—å·åŒ–ï¼‰
const plaintext = 'This is a secret message.';
// TODO: publicKey ã‚’ä½¿ã£ã¦æš—å·åŒ–

// Decryptï¼ˆç§˜å¯†éµã§å¾©å·ï¼‰
// TODO: privateKey ã‚’ä½¿ã£ã¦å¾©å·

// ç½²å
const sign = crypto.createSign('SHA256');
sign.update(plaintext);
sign.end();
// TODO: privateKey ã§ç½²å

// æ¤œè¨¼
const verify = crypto.createVerify('SHA256');
verify.update(plaintext);
verify.end();
// TODO: publicKey ã§ç½²åæ¤œè¨¼
```

ãƒ’ãƒ³ãƒˆï¼š`crypto` ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§: https://nodejs.org/api/crypto.html

### èª²é¡Œ2ï¼šSHA-256 ã¨ Poseidon ã®ãƒãƒƒã‚·ãƒ¥

```javascript
const crypto = require("crypto");
const poseidon = require("poseidon-encryption");

// SHA-256
const data = "This is some data X.";
// TODO: SHA-256 ãƒãƒƒã‚·ãƒ¥ã‚’è¨ˆç®—ã—ã¦è¡¨ç¤ºã€‚å…¥åŠ›ã‚’å°‘ã—å¤‰ãˆã¦å·®ç•°ã‚’è¦³å¯Ÿã€‚

// Poseidonï¼ˆæ•´æ•°é…åˆ—ã‚’å…¥åŠ›ï¼‰
const inputs = [1, 2, 3, 4];
// TODO: Poseidon ãƒãƒƒã‚·ãƒ¥ã‚’è¨ˆç®—ã—ã¦è¡¨ç¤º
```

ãƒ’ãƒ³ãƒˆï¼š`hash.digest('hex')` ã§å¯èª­ãª16é€²æ–‡å­—åˆ—ã«ã€‚`poseidon-encryption` ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå°‘ãªã„ãŸã‚ã€ã‚½ãƒ¼ã‚¹ã‚„ãƒ†ã‚¹ãƒˆã‚’å‚è€ƒã«ã€‚

### èª²é¡Œ3ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ«ã‚¯ãƒ«æœ¨

```javascript
const MerkleTree = require('merkletreejs');
const crypto = require('crypto');

function hashFunction(data) {
  const hash = crypto.createHash('sha256');
  hash.update(data);
  return hash.digest();
}

// è‘‰ã‚’ä½œæˆ
const leaves = ['a', 'b', 'c', 'd'].map(x => hashFunction(x));
// TODO: ãƒ¡ãƒ«ã‚¯ãƒ«æœ¨ã‚’æ§‹ç¯‰ã—ã€ãƒ«ãƒ¼ãƒˆã‚’è¡¨ç¤º

// è¨¼æ˜ã®ç”Ÿæˆã¨æ¤œè¨¼
const leaf = hashFunction('b');
// TODO: leaf 'b' ã®åŒ…å«è¨¼æ˜ã‚’ç”Ÿæˆã—ã€ãƒ«ãƒ¼ãƒˆã«å¯¾ã—ã¦æ¤œè¨¼
```

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://github.com/merkletreejs/merkletreejs

### èª²é¡Œ4ï¼šPedersen ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆã®å®Ÿè£…

```javascript
class PedersenCommitment {
  constructor() {
    this.p = BigInt(23); // å®Ÿé‹ç”¨ã§ã¯å¤§ããªç´ æ•°ã«
    this.g = BigInt(4);  // å®Ÿé‹ç”¨ã§ã¯å¤§ããªç”Ÿæˆå…ƒã«
    this.h = null;
    this.r = null;
    this.s = null;
  }

  // h = g^r mod p ã‚’ç”Ÿæˆ
  generateH() {
    // TODO: r ã‚’ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆï¼ˆthis.rï¼‰ã—ã€h ã‚’è¨ˆç®—ï¼ˆthis.hï¼‰
  }

  // ã‚³ãƒŸãƒƒãƒˆ C = g^s * h^r mod p
  generateCommitment(s) {
    // TODO: s ã‚’ BigInt åŒ–ï¼ˆthis.sï¼‰ã—ã€C ã‚’è¿”ã™
  }

  // é–‹ç¤ºï¼ˆs, rï¼‰
  reveal() {
    // TODO: s, r ã‚’è¿”ã™
  }

  // æ¤œè¨¼ï¼ˆå†è¨ˆç®—ã—ã¦ä¸€è‡´ã‚’ç¢ºèªï¼‰
  verify(s, r, C) {
    // TODO: C ã¨ g^s * h^r mod p ã‚’æ¯”è¼ƒ
  }
}

// ãƒ†ã‚¹ãƒˆ
const pc = new PedersenCommitment();
pc.generateH();

let secretNumber = 7;
let commitment = pc.generateCommitment(secretNumber);
console.log("Commitment: ", commitment);

let reveal = pc.reveal();
console.log("Revealed: ", reveal);

let verification = pc.verify(reveal.s, reveal.r, commitment);
console.log("Verification: ", verification);
```

æœ€çµ‚è¡ŒãŒ `Verification: true` ã«ãªã£ã¦ã„ã‚Œã°æˆåŠŸã§ã™ã€‚ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼

## ã¾ã¨ã‚

æš—å·åŒ–ã€ãƒãƒƒã‚·ãƒ¥ã€ãƒ¡ãƒ«ã‚¯ãƒ«æœ¨ã€ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆã€ç½²åã¨ã„ã£ãŸæš—å·ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚’ä¿¯ç°ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã¯ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚„ ZKP ã®åŸºç›¤ã§ã™ã€‚æ¬¡ã¯æ¥•å††æ›²ç·šæš—å·ã¸é€²ã¿ã¾ã™ã€‚

